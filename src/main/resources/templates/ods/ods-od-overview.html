<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="layout :: head('Login')"></head>
<body>
<div th:replace="layout :: nav"></div>


<div class="container pt-5 pb-5 text-justify">
    <h1>Sustainable Development Goals as a graph</h1>
    <p><span>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Adipisci, alias amet architecto aspernatur assumenda culpa deserunt dolore enim id itaque iusto labore necessitatibus recusandae rem, velit, voluptatem voluptatibus! Consequuntur, praesentium?</span><span>Aspernatur dignissimos ea esse illo iste iusto, natus voluptatem! Atque doloribus earum maxime nesciunt, quod temporibus. Alias aliquid atque cumque cupiditate deserunt doloribus, ea libero magnam nostrum odit, officiis quo.</span><span>Atque consequuntur distinctio iure minus nesciunt non nulla placeat qui quod rem reprehenderit, ullam velit veritatis voluptas, voluptatibus! Ab accusantium, atque consequatur corporis enim id iure laborum porro quas vitae.</span><span>Alias aliquam architecto, aspernatur commodi consequatur dicta dolores eaque explicabo facere facilis fugiat illum itaque iusto libero minima nesciunt pariatur perspiciatis placeat porro quibusdam quod ratione repellendus rerum sint ullam?</span><span>Commodi dicta dignissimos, dolores eius, id itaque nobis perspiciatis porro quibusdam recusandae rem repellat temporibus voluptatum. Accusantium at cumque dolor dolorem, ea eaque, fugit id, ipsa iure nobis quae tempora.</span></p>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Error laboriosam odit quae recusandae rerum tempore tenetur unde. Ducimus ea est illo, libero nam nihil quaerat. Asperiores consectetur facere tempora unde.</p>
    <div style="width: 100%; overflow: auto;">
        <div id="result"></div>
    </div>
    <h1 class="mt-4">Connections between Open Data and the SDG</h1>
    <p><span>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusamus cum maiores minima odio odit reiciendis sed unde, veniam. Adipisci corporis culpa id maiores modi nisi non repellendus sequi similique voluptatem.</span><span>Accusamus animi, at earum eum inventore itaque necessitatibus, nemo omnis quibusdam quo sint tempora veniam, voluptates. At cumque, facere ipsa quia sapiente tempora ut vel. Culpa deserunt expedita nulla repellat!</span></p>
    <div class="graph-container">
        <canvas id="myChart" width="400" height="400"></canvas>
    </div>
</div>

<div th:replace="layout :: scripts"></div>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0/dist/Chart.min.js"></script>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script th:src="@{/assets/d3/d3sparql.js}"></script>
<script th:inline="javascript">
    /*<![CDATA[*/

    var labels = /*[[${odsLabels}]]*/ 'default';
    var values = /*[[${datasetsCounts}]]*/ 'default';
    var sparqlEndpoint = /*[[${sparqlEndpoint}]]*/ 'default';

    /*]]>*/

    function exec() {
        // var endpoint = d3.select("#endpoint").property("value")
        // var sparql = d3.select("#sparql").property("value")
        var endpoint = sparqlEndpoint;
        var sparql = "select ?name ?label where {\n" +
            "?s a skos:Concept ;\n" +
            "    skos:inScheme ?concept ;\n" +
            "    skos:prefLabel ?name .\n" +
            "?concept rdfs:label ?label .\n" +
            "FILTER regex(str(?concept), \"SDG_Goal\")\n" +
            "} ";
        d3sparql.query(endpoint, sparql, render)
    }
    function render(json) {
        var config = {
            "charge": -200,
            "distance": 65,
            "width": 1110,
            "height": 750,
            "selector": "#result"
        }
        d3sparql.forcegraph(json, config)
    }

    $( document ).ready(function() {
        // Draw d3 sparql graph
        exec();

        // Draw charts
        var ctx = document.getElementById('myChart').getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                // labels: ['Goal 1', 'Goal 2', 'Goal 3', 'Goal 4', 'Goal 5', 'Goal 6', 'Goal 7', 'Goal 8', 'Goal 9', 'Goal 10', 'Goal 11', 'Goal 12', 'Goal 13', 'Goal 14', 'Goal 15', 'Goal 16', 'Goal 17'],
                labels: labels,
                datasets: [{
                    label: '# of Resources related to each SDG',
                    data: values,
                    backgroundColor: [
                        'rgba(235, 28, 45, 1)',
                        'rgba(211, 160, 41, 1)',
                        'rgba(39, 155, 72, 1)',
                        'rgba(195, 31, 51, 1)',
                        'rgba(239, 64, 43, 1)',
                        'rgba(0, 174, 217, 1)',
                        'rgba(253, 183, 19, 1)',
                        'rgba(143, 24, 56, 1)',
                        'rgba(225, 20, 132, 1)',
                        'rgba(249, 157, 38, 1)',
                        'rgba(207, 141, 42, 1)',
                        'rgba(72, 119, 62, 1)',
                        'rgba(0, 125, 188, 1)',
                        'rgba(93, 187, 70, 1)',
                        'rgba(24, 54, 104, 1)'
                    ],
                    borderColor: [
                        'rgba(235, 28, 45, 1)',
                        'rgba(211, 160, 41, 1)',
                        'rgba(39, 155, 72, 1)',
                        'rgba(195, 31, 51, 1)',
                        'rgba(239, 64, 43, 1)',
                        'rgba(0, 174, 217, 1)',
                        'rgba(253, 183, 19, 1)',
                        'rgba(143, 24, 56, 1)',
                        'rgba(225, 20, 132, 1)',
                        'rgba(249, 157, 38, 1)',
                        'rgba(207, 141, 42, 1)',
                        'rgba(72, 119, 62, 1)',
                        'rgba(0, 125, 188, 1)',
                        'rgba(93, 187, 70, 1)',
                        'rgba(24, 54, 104, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                legend: {
                    position: 'top',
                },
                animation: {
                    animateScale: true,
                    animateRotate: true
                }
            }
        });
    });
</script>
</body>
</html>